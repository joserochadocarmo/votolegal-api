<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.38.0 (20140413.2041)
 -->
<!-- Title: finite_state_machine Pages: 1 -->
<svg width="1748pt" height="560pt"
 viewBox="0.00 0.00 1748.21 560.14" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 556.138)">
<title>finite_state_machine</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-556.138 1744.21,-556.138 1744.21,4 -4,4"/>
<!-- created -->
<g id="node1" class="node"><title>created</title>
<ellipse fill="none" stroke="black" cx="40.3968" cy="-327.694" rx="36.304" ry="36.304"/>
<ellipse fill="none" stroke="black" cx="40.3968" cy="-327.694" rx="40.2938" ry="40.2938"/>
<text text-anchor="middle" x="40.3968" y="-323.994" font-family="Times,serif" font-size="14.00">created</text>
</g>
<!-- boleto_authentication -->
<g id="node2" class="node"><title>boleto_authentication</title>
<ellipse fill="none" stroke="#000000" cx="294.886" cy="-327.694" rx="87.1846" ry="87.1846"/>
<text text-anchor="middle" x="294.886" y="-323.994" font-family="Times,serif" font-size="14.00">boleto_authentication</text>
</g>
<!-- created&#45;&gt;boleto_authentication -->
<g id="edge6" class="edge"><title>created&#45;&gt;boleto_authentication</title>
<path fill="none" stroke="#00cc1e" d="M80.8482,-327.694C112.046,-327.694 156.95,-327.694 197.496,-327.694"/>
<polygon fill="#00cc1e" stroke="#00cc1e" points="197.7,-331.194 207.7,-327.694 197.7,-324.194 197.7,-331.194"/>
<text text-anchor="middle" x="144.294" y="-331.494" font-family="Times,serif" font-size="14.00">BoletoWithAuth</text>
</g>
<!-- waiting_boleto_payment -->
<g id="node4" class="node"><title>waiting_boleto_payment</title>
<ellipse fill="none" stroke="#000000" cx="616.769" cy="-450.694" rx="98.5829" ry="98.5829"/>
<text text-anchor="middle" x="616.769" y="-446.994" font-family="Times,serif" font-size="14.00">waiting_boleto_payment</text>
</g>
<!-- created&#45;&gt;waiting_boleto_payment -->
<g id="edge8" class="edge"><title>created&#45;&gt;waiting_boleto_payment</title>
<path fill="none" stroke="#00cc1e" d="M73.1063,-351.964C105.151,-374.99 157.051,-408.293 207.794,-423.694 306.353,-453.609 424.253,-458.287 507.906,-456.725"/>
<polygon fill="#00cc1e" stroke="#00cc1e" points="508.013,-460.224 517.934,-456.505 507.86,-453.226 508.013,-460.224"/>
<text text-anchor="middle" x="294.886" y="-456.494" font-family="Times,serif" font-size="14.00">BoletoWithoutAuth</text>
</g>
<!-- credit_card_form -->
<g id="node8" class="node"><title>credit_card_form</title>
<ellipse fill="none" stroke="#000000" cx="294.886" cy="-150.694" rx="72.2875" ry="72.2875"/>
<text text-anchor="middle" x="294.886" y="-146.994" font-family="Times,serif" font-size="14.00">credit_card_form</text>
</g>
<!-- created&#45;&gt;credit_card_form -->
<g id="edge7" class="edge"><title>created&#45;&gt;credit_card_form</title>
<path fill="none" stroke="#00cc1e" d="M73.8884,-304.917C112.29,-277.997 177.205,-232.49 226.595,-197.866"/>
<polygon fill="#00cc1e" stroke="#00cc1e" points="228.824,-200.578 235.003,-191.972 224.806,-194.847 228.824,-200.578"/>
<text text-anchor="middle" x="144.294" y="-289.494" font-family="Times,serif" font-size="14.00">CreditCard</text>
</g>
<!-- certificate_refused -->
<g id="node3" class="node"><title>certificate_refused</title>
<ellipse fill="none" stroke="#000000" cx="616.769" cy="-257.694" rx="76.0865" ry="76.0865"/>
<text text-anchor="middle" x="616.769" y="-253.994" font-family="Times,serif" font-size="14.00">certificate_refused</text>
</g>
<!-- boleto_authentication&#45;&gt;certificate_refused -->
<g id="edge1" class="edge"><title>boleto_authentication&#45;&gt;certificate_refused</title>
<path fill="none" stroke="black" d="M380.35,-309.211C427.354,-298.925 485.643,-286.17 532.461,-275.925"/>
<polygon fill="black" stroke="black" points="533.248,-279.335 542.269,-273.778 531.752,-272.497 533.248,-279.335"/>
<text text-anchor="middle" x="449.978" y="-307.494" font-family="Times,serif" font-size="14.00">not_human</text>
</g>
<!-- boleto_authentication&#45;&gt;waiting_boleto_payment -->
<g id="edge2" class="edge"><title>boleto_authentication&#45;&gt;waiting_boleto_payment</title>
<path fill="none" stroke="black" d="M376.606,-358.732C418.595,-374.878 470.329,-394.77 514.928,-411.919"/>
<polygon fill="black" stroke="black" points="513.741,-415.213 524.331,-415.535 516.253,-408.679 513.741,-415.213"/>
<text text-anchor="middle" x="449.978" y="-407.494" font-family="Times,serif" font-size="14.00">human_verified</text>
</g>
<!-- certificate_refused&#45;&gt;credit_card_form -->
<g id="edge5" class="edge"><title>certificate_refused&#45;&gt;credit_card_form</title>
<path fill="none" stroke="black" d="M544.423,-233.829C493.614,-216.834 425.38,-194.01 373.261,-176.576"/>
<polygon fill="black" stroke="black" points="374.319,-173.239 363.725,-173.386 372.098,-179.878 374.319,-173.239"/>
<text text-anchor="middle" x="449.978" y="-221.494" font-family="Times,serif" font-size="14.00">pay_with_cc</text>
</g>
<!-- validate_payment -->
<g id="node13" class="node"><title>validate_payment</title>
<ellipse fill="#60afff" stroke="black" cx="925.004" cy="-478.694" rx="73.387" ry="73.387"/>
<text text-anchor="middle" x="925.004" y="-474.994" font-family="Times,serif" font-size="14.00">validate_payment</text>
</g>
<!-- waiting_boleto_payment&#45;&gt;validate_payment -->
<g id="edge18" class="edge"><title>waiting_boleto_payment&#45;&gt;validate_payment</title>
<path fill="none" stroke="black" d="M715.506,-459.631C755.998,-463.333 802.462,-467.581 841.236,-471.127"/>
<polygon fill="black" stroke="black" points="841.16,-474.634 851.437,-472.059 841.797,-467.663 841.16,-474.634"/>
<text text-anchor="middle" x="783.561" y="-473.494" font-family="Times,serif" font-size="14.00">boleto_paid</text>
</g>
<!-- boleto_expired -->
<g id="node14" class="node"><title>boleto_expired</title>
<ellipse fill="#ffbfc6" stroke="black" cx="925.004" cy="-323.694" rx="63.8893" ry="63.8893"/>
<text text-anchor="middle" x="925.004" y="-319.994" font-family="Times,serif" font-size="14.00">boleto_expired</text>
</g>
<!-- waiting_boleto_payment&#45;&gt;boleto_expired -->
<g id="edge17" class="edge"><title>waiting_boleto_payment&#45;&gt;boleto_expired</title>
<path fill="none" stroke="black" d="M708.407,-413.106C755.893,-393.412 813.057,-369.706 856.589,-351.653"/>
<polygon fill="black" stroke="black" points="858.045,-354.838 865.942,-347.774 855.364,-348.372 858.045,-354.838"/>
<text text-anchor="middle" x="783.561" y="-405.494" font-family="Times,serif" font-size="14.00">due_reached</text>
</g>
<!-- capture_cc -->
<g id="node5" class="node"><title>capture_cc</title>
<ellipse fill="#60afff" stroke="black" cx="925.004" cy="-193.694" rx="48.9926" ry="48.9926"/>
<text text-anchor="middle" x="925.004" y="-189.994" font-family="Times,serif" font-size="14.00">capture_cc</text>
</g>
<!-- error_manual_check -->
<g id="node6" class="node"><title>error_manual_check</title>
<ellipse fill="#ffd6bf" stroke="black" cx="1657.02" cy="-438.694" rx="83.3857" ry="83.3857"/>
<text text-anchor="middle" x="1657.02" y="-434.994" font-family="Times,serif" font-size="14.00">error_manual_check</text>
</g>
<!-- capture_cc&#45;&gt;error_manual_check -->
<g id="edge3" class="edge"><title>capture_cc&#45;&gt;error_manual_check</title>
<path fill="none" stroke="#00cc1e" d="M964.012,-223.529C975.123,-232.269 987.281,-241.853 998.448,-250.694 1055.48,-295.852 1059.94,-323.238 1126.45,-352.694 1270,-416.272 1454.11,-433.41 1563.12,-437.7"/>
<polygon fill="#00cc1e" stroke="#00cc1e" points="1563.32,-441.21 1573.44,-438.077 1563.57,-434.214 1563.32,-441.21"/>
<text text-anchor="middle" x="1373.93" y="-428.494" font-family="Times,serif" font-size="14.00">error</text>
</g>
<!-- wait_for_compensation -->
<g id="node7" class="node"><title>wait_for_compensation</title>
<ellipse fill="#68ffa7" stroke="black" cx="1220.69" cy="-249.694" rx="94.4839" ry="94.4839"/>
<text text-anchor="middle" x="1220.69" y="-245.994" font-family="Times,serif" font-size="14.00">wait_for_compensation</text>
</g>
<!-- capture_cc&#45;&gt;wait_for_compensation -->
<g id="edge4" class="edge"><title>capture_cc&#45;&gt;wait_for_compensation</title>
<path fill="none" stroke="#00cc1e" d="M973.19,-202.692C1012.1,-210.111 1068.68,-220.901 1117.83,-230.271"/>
<polygon fill="#00cc1e" stroke="#00cc1e" points="1117.39,-233.751 1127.87,-232.186 1118.7,-226.875 1117.39,-233.751"/>
<text text-anchor="middle" x="1062.45" y="-232.494" font-family="Times,serif" font-size="14.00">captured</text>
</g>
<!-- done -->
<g id="node10" class="node"><title>done</title>
<ellipse fill="none" stroke="#000000" cx="1460.88" cy="-217.694" rx="27.8951" ry="27.8951"/>
<text text-anchor="middle" x="1460.88" y="-213.994" font-family="Times,serif" font-size="14.00">done</text>
</g>
<!-- wait_for_compensation&#45;&gt;done -->
<g id="edge15" class="edge"><title>wait_for_compensation&#45;&gt;done</title>
<path fill="none" stroke="black" d="M1314.12,-237.277C1352.09,-232.176 1393.87,-226.563 1422.92,-222.659"/>
<polygon fill="black" stroke="black" points="1423.58,-226.103 1433.02,-221.302 1422.65,-219.165 1423.58,-226.103"/>
<text text-anchor="middle" x="1373.93" y="-238.494" font-family="Times,serif" font-size="14.00">ok</text>
</g>
<!-- refunded -->
<g id="node11" class="node"><title>refunded</title>
<ellipse fill="#ffd6bf" stroke="black" cx="1657.02" cy="-259.694" rx="42.4939" ry="42.4939"/>
<text text-anchor="middle" x="1657.02" y="-255.994" font-family="Times,serif" font-size="14.00">refunded</text>
</g>
<!-- wait_for_compensation&#45;&gt;refunded -->
<g id="edge16" class="edge"><title>wait_for_compensation&#45;&gt;refunded</title>
<path fill="none" stroke="black" d="M1315.16,-253.173C1321.17,-253.36 1327.14,-253.536 1332.93,-253.694 1428.82,-256.308 1540.74,-258.107 1604.51,-259.014"/>
<polygon fill="black" stroke="black" points="1604.65,-262.516 1614.7,-259.157 1604.75,-255.517 1604.65,-262.516"/>
<text text-anchor="middle" x="1460.88" y="-261.494" font-family="Times,serif" font-size="14.00">refunded</text>
</g>
<!-- start_cc_payment -->
<g id="node9" class="node"><title>start_cc_payment</title>
<ellipse fill="none" stroke="#000000" cx="616.769" cy="-90.6943" rx="73.387" ry="73.387"/>
<text text-anchor="middle" x="616.769" y="-86.9943" font-family="Times,serif" font-size="14.00">start_cc_payment</text>
</g>
<!-- credit_card_form&#45;&gt;start_cc_payment -->
<g id="edge9" class="edge"><title>credit_card_form&#45;&gt;start_cc_payment</title>
<path fill="none" stroke="black" d="M366.086,-137.527C415.759,-128.21 482.507,-115.69 534.492,-105.939"/>
<polygon fill="black" stroke="black" points="535.167,-109.374 544.351,-104.09 533.877,-102.494 535.167,-109.374"/>
<text text-anchor="middle" x="449.978" y="-133.494" font-family="Times,serif" font-size="14.00">credit_card_added</text>
</g>
<!-- start_cc_payment&#45;&gt;capture_cc -->
<g id="edge11" class="edge"><title>start_cc_payment&#45;&gt;capture_cc</title>
<path fill="none" stroke="#00cc1e" d="M686.494,-113.81C741.496,-132.309 817.625,-157.914 868.73,-175.103"/>
<polygon fill="#00cc1e" stroke="#00cc1e" points="867.693,-178.447 878.287,-178.318 869.924,-171.812 867.693,-178.447"/>
<text text-anchor="middle" x="783.561" y="-167.494" font-family="Times,serif" font-size="14.00">cc_authorized</text>
</g>
<!-- not_authorized -->
<g id="node12" class="node"><title>not_authorized</title>
<ellipse fill="#ffbfc6" stroke="black" cx="925.004" cy="-63.6943" rx="63.8893" ry="63.8893"/>
<text text-anchor="middle" x="925.004" y="-59.9943" font-family="Times,serif" font-size="14.00">not_authorized</text>
</g>
<!-- start_cc_payment&#45;&gt;not_authorized -->
<g id="edge12" class="edge"><title>start_cc_payment&#45;&gt;not_authorized</title>
<path fill="none" stroke="#00cc1e" d="M689.955,-84.3299C738.573,-80.0434 802.467,-74.4099 851.212,-70.1123"/>
<polygon fill="#00cc1e" stroke="#00cc1e" points="851.718,-73.5813 861.372,-69.2164 851.104,-66.6083 851.718,-73.5813"/>
<text text-anchor="middle" x="783.561" y="-84.4943" font-family="Times,serif" font-size="14.00">cc_not_authorized</text>
</g>
<!-- done&#45;&gt;refunded -->
<g id="edge10" class="edge"><title>done&#45;&gt;refunded</title>
<path fill="none" stroke="black" d="M1488.47,-223.446C1518.46,-229.935 1567.94,-240.639 1605.37,-248.737"/>
<polygon fill="black" stroke="black" points="1605.07,-252.253 1615.58,-250.946 1606.55,-245.411 1605.07,-252.253"/>
<text text-anchor="middle" x="1531.33" y="-241.494" font-family="Times,serif" font-size="14.00">refunded</text>
</g>
<!-- validate_payment&#45;&gt;error_manual_check -->
<g id="edge13" class="edge"><title>validate_payment&#45;&gt;error_manual_check</title>
<path fill="none" stroke="#00cc1e" d="M998.669,-474.713C1132.24,-467.394 1416.53,-451.817 1563.6,-443.758"/>
<polygon fill="#00cc1e" stroke="#00cc1e" points="1564.15,-447.233 1573.95,-443.191 1563.77,-440.244 1564.15,-447.233"/>
<text text-anchor="middle" x="1373.93" y="-459.494" font-family="Times,serif" font-size="14.00">not_acceptable</text>
</g>
<!-- validate_payment&#45;&gt;wait_for_compensation -->
<g id="edge14" class="edge"><title>validate_payment&#45;&gt;wait_for_compensation</title>
<path fill="none" stroke="#00cc1e" d="M983.327,-433.997C1027.29,-399.72 1088.55,-351.947 1137.7,-313.629"/>
<polygon fill="#00cc1e" stroke="#00cc1e" points="1140.05,-316.231 1145.78,-307.321 1135.75,-310.71 1140.05,-316.231"/>
<text text-anchor="middle" x="1062.45" y="-407.494" font-family="Times,serif" font-size="14.00">paid_amount_ok</text>
</g>
</g>
</svg>
